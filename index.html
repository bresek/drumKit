<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title></title>
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+HK:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="background">
    <div class="box title">
      <h1>JavaScript</h1>
      <h1>Drumkit</h1>
    </div>


    <div class="gridContainer">
      <div data-key="65" class="box">
        <span class='key'>A</span>
        <p>CLAP</p>
      </div>
      <div data-key="83" class="box">
        <span class='key'>S</span>
        <p>HIHAT</p>
      </div>
      <div data-key="68" class="box">
        <span class='key'>D</span>
        <p>KICK</p>
      </div>
      <div data-key="70" class="box">
        <span class='key'>F</span>
        <p>OPENHAT</p>
      </div>
      <div data-key="71" class="box">
        <span class='key'>G</span>
        <p>BOOM</p>
      </div>
      <div data-key="72" class="box">
        <span class='key'>H</span>
        <p>RIDE</p>
      </div>
      <div data-key="74" class="box">
        <span class='key'>J</span>
        <p>SNARE</p>
      </div>
      <div data-key="75" class="box">
        <span class='key'>K</span>
        <p>TOM</p>
      </div>
      <div data-key="76" class="box">
        <span class='key'>L</span>
        <p>TINK</p>
      </div>
    </div>
  </div>

  <audio data-key="65" src="sounds/clap.wav"></audio>
  <audio data-key="83" src="sounds/hihat.wav"></audio>
  <audio data-key="68" src="sounds/kick.wav"></audio>
  <audio data-key="70" src="sounds/openhat.wav"></audio>
  <audio data-key="71" src="sounds/boom.wav"></audio>
  <audio data-key="72" src="sounds/ride.wav"></audio>
  <audio data-key="74" src="sounds/snare.wav"></audio>
  <audio data-key="75" src="sounds/tom.wav"></audio>
  <audio data-key="76" src="sounds/tink.wav"></audio>

  <script>
    window.addEventListener('keydown', function(event) {
      const key = event.keyCode
      console.log(key)
      const audio = document.querySelector(`audio[data-key="${key}"]`)
      const button = document.querySelector(`.box[data-key="${key}"]`)
      if(!audio) return;//stop function if no corresponding audio
      audio.currentTime= 0; //resets audio to begining so it can be played multiple times
      audio.play();
      console.log(button);
      button.classList.add("playing")
      setTimeout(function(){
        button.classList.remove("playing")
      },100)

    })
    const buttons = document.querySelectorAll('.box')
    for (let i=0; i < buttons.length; i++){
      buttons[i].addEventListener("click", function(event){
        console.log(event.path[1].attributes[0].nodeValue)
        key = event.path[1].attributes[0].nodeValue
        const audio = document.querySelector(`audio[data-key="${key}"]`)
        const button = document.querySelector(`.box[data-key="${key}"]`)
        if(!audio) return;//stop function if no corresponding audio
        audio.currentTime= 0; //resets audio to begining so it can be played multiple times
        audio.play();
        console.log(button);
        button.classList.add("playing")
        setTimeout(function(){
          button.classList.remove("playing")
        },100)
      })
    }
  </script>
  <footer>
    <p>Made by Ben Resek - <a href="https://github.com/bresek">Github</a></p>

  </footer>
</body>

</html>
